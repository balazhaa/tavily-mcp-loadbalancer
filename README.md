# Tavily MCP Load Balancer

ä¸€ä¸ªæ”¯æŒå¤šAPIå¯†é’¥è´Ÿè½½å‡è¡¡çš„Tavily MCPæœåŠ¡å™¨ï¼Œå¯ä»¥è‡ªåŠ¨è½®è¯¢ä½¿ç”¨å¤šä¸ªAPIå¯†é’¥ï¼Œæä¾›é«˜å¯ç”¨æ€§å’Œæ›´é«˜çš„è¯·æ±‚é™åˆ¶ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ”„ **è´Ÿè½½å‡è¡¡**: è‡ªåŠ¨è½®è¯¢å¤šä¸ªAPIå¯†é’¥
- ğŸ›¡ï¸ **æ•…éšœè½¬ç§»**: è‡ªåŠ¨ç¦ç”¨å¤±æ•ˆçš„APIå¯†é’¥
- ğŸ“Š **ç»Ÿè®¡ç›‘æ§**: å®æ—¶æŸ¥çœ‹å¯†é’¥ä½¿ç”¨çŠ¶æ€
- ğŸŒ **SSEæ”¯æŒ**: é€šè¿‡supergatewayæä¾›SSEæ¥å£
- âš¡ **é«˜æ€§èƒ½**: åŸºäºTypeScriptå’Œç°ä»£Node.js

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
cd tavily-mcp-loadbalancer
npm install
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿ï¼š
```bash
cp .env.example .env
```

ç¼–è¾‘`.env`æ–‡ä»¶ï¼Œæ·»åŠ ä½ çš„APIå¯†é’¥ï¼š
```bash
# å¤šä¸ªå¯†é’¥ç”¨é€—å·åˆ†éš”ï¼ˆæ¨èï¼‰
TAVILY_API_KEYS=tvly-dev-key1,tvly-dev-key2,tvly-dev-key3

# æˆ–è€…ä½¿ç”¨å•ä¸ªå¯†é’¥
# TAVILY_API_KEY=tvly-dev-your-key
```

### å¯åŠ¨æœåŠ¡å™¨

**æ–¹æ³•1ï¼šä½¿ç”¨npmè„šæœ¬ï¼ˆæ¨èï¼‰**
```bash
npm run build-and-start
```

**æ–¹æ³•2ï¼šä½¿ç”¨bashè„šæœ¬**
```bash
./start.sh
```

**æ–¹æ³•3ï¼šåˆ†æ­¥æ‰§è¡Œ**
```bash
npm run build
npm run start-gateway
```

æœåŠ¡å™¨å°†åœ¨ `http://0.0.0.0:60002` ä¸Šå¯åŠ¨ï¼Œæä¾›SSEæ¥å£ã€‚

## ä½¿ç”¨æ–¹æ³•

### ç›´æ¥ä½¿ç”¨MCPï¼ˆstdioï¼‰

```bash
node dist/index.js
```

### é€šè¿‡SSEæ¥å£ä½¿ç”¨

å¯åŠ¨åï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹ç«¯ç‚¹è®¿é—®ï¼š
- SSEè¿æ¥: `http://0.0.0.0:60002/sse`
- æ¶ˆæ¯å‘é€: `http://0.0.0.0:60002/message`

### å¯ç”¨å·¥å…·

#### 1. tavily-search
æœç´¢ç½‘ç»œå†…å®¹ï¼š
```json
{
  "name": "tavily-search",
  "arguments": {
    "query": "OpenAI GPT-4",
    "search_depth": "basic",
    "topic": "general",
    "max_results": 10
  }
}
```

#### 2. tavily-extract
æå–ç½‘é¡µå†…å®¹ï¼š
```json
{
  "name": "tavily-extract",
  "arguments": {
    "urls": ["https://example.com/article"],
    "extract_depth": "basic"
  }
}
```

#### 3. tavily-crawl
çˆ¬å–ç½‘ç«™ï¼š
```json
{
  "name": "tavily-crawl",
  "arguments": {
    "url": "https://example.com",
    "max_depth": 2,
    "limit": 10
  }
}
```

#### 4. tavily-map
ç”Ÿæˆç½‘ç«™åœ°å›¾ï¼š
```json
{
  "name": "tavily-map",
  "arguments": {
    "url": "https://example.com",
    "max_depth": 1
  }
}
```

#### 5. tavily_get_stats
è·å–APIå¯†é’¥æ± ç»Ÿè®¡ä¿¡æ¯ï¼š
```json
{
  "name": "tavily_get_stats",
  "arguments": {}
}
```

## ç›‘æ§å’Œç®¡ç†

### ä½¿ç”¨ç®¡ç†è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# æŸ¥çœ‹APIå¯†é’¥æ± çŠ¶æ€
./manage.sh stats

# æµ‹è¯•æ‰€æœ‰å·¥å…·åŠŸèƒ½
./manage.sh test

# æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
./manage.sh help
```

### ç›´æ¥ä½¿ç”¨Node.jsè„šæœ¬

```bash
# æŸ¥çœ‹è¯¦ç»†ç»Ÿè®¡ä¿¡æ¯
node check_stats_direct.cjs

# è¿è¡Œå·¥å…·æµ‹è¯•
node test_tools_direct.cjs
```

### ç›‘æ§è¾“å‡ºç¤ºä¾‹
```
ğŸ“Š è·å–APIå¯†é’¥æ± çŠ¶æ€...
========================================
âœ… è¿æ¥æˆåŠŸ

ğŸ“Š APIå¯†é’¥æ± ç»Ÿè®¡ä¿¡æ¯:
========================================
æ€»å¯†é’¥æ•°é‡: 3
æ´»è·ƒå¯†é’¥æ•°é‡: 2

ğŸ“‹ å¯†é’¥è¯¦æƒ…:
----------------------------------------
ğŸ”‘ å¯†é’¥: tvly-dev-T...
   çŠ¶æ€: ğŸŸ¢ æ´»è·ƒ
   é”™è¯¯æ¬¡æ•°: 0/5
   æœ€åä½¿ç”¨: 2024-01-15T10:30:00.000Z
   æƒé‡: 1

ğŸ”‘ å¯†é’¥: tvly-dev-Y...
   çŠ¶æ€: ğŸ”´ ç¦ç”¨
   é”™è¯¯æ¬¡æ•°: 5/5
   æœ€åä½¿ç”¨: 2024-01-15T10:25:00.000Z
   æƒé‡: 1
```

## ç¯å¢ƒå˜é‡

| å˜é‡å | æè¿° | é»˜è®¤å€¼ |
|--------|------|---------|
| `TAVILY_API_KEYS` | APIå¯†é’¥åˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰ | - |
| `TAVILY_API_KEY` | å•ä¸ªAPIå¯†é’¥ | - |
| `SUPERGATEWAY_PORT` | æœåŠ¡ç«¯å£ | 60002 |
| `SUPERGATEWAY_BASE_URL` | åŸºç¡€URL | http://0.0.0.0:60002 |
| `SUPERGATEWAY_SSE_PATH` | SSEè·¯å¾„ | /sse |
| `SUPERGATEWAY_MESSAGE_PATH` | æ¶ˆæ¯è·¯å¾„ | /message |

## æ¶æ„è®¾è®¡

### APIå¯†é’¥æ± ç®¡ç†
- è½®è¯¢è°ƒåº¦ç®—æ³•
- è‡ªåŠ¨æ•…éšœæ£€æµ‹å’Œæ¢å¤
- é”™è¯¯è®¡æ•°å’Œè‡ªåŠ¨ç¦ç”¨
- å®æ—¶ç»Ÿè®¡å’Œç›‘æ§

### è´Ÿè½½å‡è¡¡ç­–ç•¥
- è½®è¯¢ï¼ˆRound Robinï¼‰
- æ•…éšœè½¬ç§»ï¼ˆFailoverï¼‰
- å¥åº·æ£€æŸ¥

## å¼€å‘

### å¼€å‘æ¨¡å¼è¿è¡Œ
```bash
npm run dev
```

### æ„å»ºé¡¹ç›®
```bash
npm run build
```

### è¿è¡Œæµ‹è¯•
```bash
npm test
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **No available API keys**
   - æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®è®¾ç½®
   - ç¡®ä¿è‡³å°‘æœ‰ä¸€ä¸ªæœ‰æ•ˆçš„APIå¯†é’¥

2. **APIå¯†é’¥è¢«ç¦ç”¨**
   - æ£€æŸ¥APIå¯†é’¥æ˜¯å¦æœ‰æ•ˆ
   - æŸ¥çœ‹é”™è¯¯æ—¥å¿—ç¡®å®šé—®é¢˜åŸå› 

3. **è¿æ¥è¶…æ—¶**
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - ç¡®è®¤APIæœåŠ¡æ˜¯å¦æ­£å¸¸

### æ—¥å¿—ä¿¡æ¯

æœåŠ¡å™¨ä¼šè¾“å‡ºè¯¦ç»†çš„æ—¥å¿—ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š
- APIå¯†é’¥ä½¿ç”¨æƒ…å†µ
- é”™è¯¯ä¿¡æ¯å’Œæ•…éšœè½¬ç§»
- è¯·æ±‚ç»Ÿè®¡

## è®¸å¯è¯

MIT License